<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <style type="text/css">
        input {
            height: 20px;
            margin: 3px auto;
        }

        select {
            height: 20px;
            margin: 3px auto;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script>
       
        function sign() {

            window.location.href = './sign.html';

        }



        function infoConfirmed() {
            var xmlhttp = new XMLHttpRequest();

            var name = document.getElementById('name').value;
            var pass = document.getElementById('pass').value;
            var obj = {
                name: name,
                pass: pass
            };
            xmlhttp.open("POST", "http://127.0.0.1:3000/user", true);
            xmlhttp.setRequestHeader("Content-Type"
                , "application/json");


            xmlhttp.send(JSON.stringify(obj));  // 要发送的参数，要转化为json字符串发送给后端，后端就会接受到json对象
         
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    var json = JSON.parse(xmlhttp.responseText);
                    if (json.status == 400)
                        alert(json.data);
                    else {
                        alert("登陆成功！");
                      
                     
                        Cookies.set('name', json.data.id);  
   
                       
                         window.location.href='./select.html';
                    }


                }
            }

        }

        function getCookie(name) {
            var arr = document.cookie.split("; ");
            console.log(arr)
            for (var i = 0, len = arr.length; i < len; i++) {
                var item = arr[i].split("=");
                if (item[0] == name) {
                    return item[1];
                }
            }
            return "";
        }
    </script>
</head>

<body>
    <h1>会员登录</h1>
    <form>
        登录名：<input type="text" id="name" />
        <br />
        密码：<input type="password" id="pass" />
    </form>


    <input type="submit" value="提交" onclick="infoConfirmed()" />
    <input type="submit" value="注册" onclick="sign()" />
</body>

</html>